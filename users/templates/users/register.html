{% extends "includes/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/users-auth.css' %}?v=20260226b" />
{% endblock %}

{% block content %}
<section class="login-main-wrapper auth-screen auth-screen-signup">
  <div class="container-fluid px-0 auth-container">
    <div class="row no-gutters auth-row">
      <!-- Left Side: Registration Form -->
      <div class="col-md-5 p-5 full-height auth-form-column">
        <div class="login-main-left auth-form-panel">
          <div class="text-center auth-brand-block">
            <img
              src="{% static 'img/logo.png' %}"
              alt="Genre Genius logo"
              class="auth-brand-logo"
              width="68"
              height="68"
            />
          </div>
          <h5 class="mt-3 mb-3 text-center">Sign Up</h5>

          <!-- Display non-field errors -->
          {% if form.non_field_errors %}
          <div class="alert alert-danger">
            {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
            {% endfor %}
          </div>
          {% endif %}

          <!-- Registration Form -->
          <form method="POST" novalidate>
            {% csrf_token %}

            <!-- Username Field -->
            <div class="form-group">
              <label for="username">Username</label>
              <input
                type="text"
                class="form-control {% if form.username.errors %}is-invalid{% endif %}"
                id="username"
                name="username"
                placeholder="Enter your username"
                value="{{ form.username.value|default:'' }}"
              />
              {% for error in form.username.errors %}
              <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Email Field -->
            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="email"
                class="form-control {% if form.email.errors %}is-invalid{% endif %}"
                id="email"
                name="email"
                placeholder="Enter your email"
                value="{{ form.email.value|default:'' }}"
              />
              {% for error in form.email.errors %}
              <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Password Field -->
            <div class="form-group">
              <label for="password1">Password</label>
              <input
                type="password"
                class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
                id="password1"
                name="password1"
                placeholder="Enter your password"
                autocomplete="off"
              />
              {% for error in form.password1.errors %}
              <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Confirm Password Field -->
            <div class="form-group">
              <label for="password2">Confirm Password</label>
              <input
                type="password"
                class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
                id="password2"
                name="password2"
                placeholder="Confirm your password"
                autocomplete="off"
              />
              {% for error in form.password2.errors %}
              <div class="invalid-feedback">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Role Selection -->
            <div class="form-group">
              <label>Role</label>
              <div class="auth-role-options">
                {% for choice in form.role.field.choices %}
                <div class="form-check">
                  <input
                    class="form-check-input {% if form.role.errors %}is-invalid{% endif %}"
                    type="radio"
                    name="role"
                    id="role_{{ forloop.counter }}"
                    value="{{ choice.0 }}"
                    {% if form.role.value == choice.0 %}checked{% endif %}
                  />
                  <label class="form-check-label" for="role_{{ forloop.counter }}">
                    {{ choice.1 }}
                  </label>
                </div>
                {% endfor %}
                {% for error in form.role.errors %}
                <div class="invalid-feedback d-block">{{ error }}</div>
                {% endfor %}
              </div>
            </div>

            <!-- Terms and Conditions Checkbox -->
            <div class="form-group">
              <div class="form-check">
                <input
                  class="form-check-input {% if form.terms_accepted.errors %}is-invalid{% endif %}"
                  type="checkbox"
                  name="terms_accepted"
                  id="terms_accepted"
                  required
                />
                <label class="form-check-label" for="terms_accepted">
                  I agree to the <a href="{% url 'terms_and_conditions' %}" target="_blank">Terms and Conditions</a>.
                </label>
                {% for error in form.terms_accepted.errors %}
                <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
              </div>
            </div>

            <!-- Sign Up Button -->
            <div class="mt-4 mb-4">
              <button type="submit" class="btn btn-outline-primary btn-block btn-lg auth-submit-btn">
                Sign Up
              </button>
            </div>

            <!-- Sign In Link -->
            <div class="text-center mt-3 mb-4 auth-alt-link">
              <p class="light-gray">
                Already have an Account? <a href="{% url 'login' %}">Sign In</a>
              </p>
            </div>
          </form>

          <!-- NoScript Fallback -->
          <noscript>
            <div class="alert alert-warning">JavaScript is required for the best experience.</div>
            {{ form.as_p }}
          </noscript>
        </div>
      </div>

      <!-- Right Side: Carousel -->
      <div class="col-md-7 auth-showcase-column">
        <div class="login-main-right p-5 mt-5 mb-5 auth-showcase-panel">
          <div class="owl-carousel owl-carousel-login">
            <!-- Carousel Item 1 -->
            <div class="item">
              <div class="carousel-login-card text-center auth-carousel-card">
                <h5 class="mt-5 mb-3">Discover Hidden Talents</h5>
                <p class="mb-4">
                  Join a community that recognizes and celebrates unique skills and talents.
                  Connect with like-minded individuals and showcase your abilities.
                </p>
              </div>
            </div>

            <!-- Carousel Item 2 -->
            <div class="item">
              <div class="carousel-login-card text-center auth-carousel-card">
                <h5 class="mt-5 mb-3">Empower Your Potential</h5>
                <p class="mb-4">
                  Find opportunities to grow and shine. Whether you're an artist, developer, or
                  innovator, this is the place to elevate your talent.
                </p>
              </div>
            </div>

            <!-- Carousel Item 3 -->
            <div class="item">
              <div class="carousel-login-card text-center auth-carousel-card">
                <h5 class="mt-5 mb-3">Build Meaningful Connections</h5>
                <p class="mb-4">
                  Collaborate with others who share your passion. Together, we can create a
                  network that fosters creativity and success.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
