{% extends "includes/base.html" %}
{% load static %}

{% block title %}Upload Content{% endblock %}

{% block extra_css %}
<link href="{% static 'css/pages/content-upload.css' %}?v=20260226b" rel="stylesheet" />
{% endblock extra_css %}

{% block content %}
<div class="container-fluid upload-page">
    <header class="upload-page-header">
        <div>
            <h1 class="upload-title mb-1">Upload Content</h1>
            <p class="upload-subtitle mb-0">Share your next release with clean metadata, a strong thumbnail, and the right tags.</p>
        </div>
        <span class="upload-header-badge"><i class="fas fa-bolt"></i> Artist Studio</span>
    </header>

    <div class="row">
        <div class="col-xl-8 col-lg-8 mb-4">
            <article class="card upload-main-card">
                <div class="card-body upload-main-body">
                    <form method="post" enctype="multipart/form-data" class="needs-validation upload-form" novalidate>
                        {% csrf_token %}

                        {% if form.non_field_errors %}
                        <div class="alert alert-danger upload-non-field-errors" role="alert">
                            {% for error in form.non_field_errors %}
                            <div>{{ error }}</div>
                            {% endfor %}
                        </div>
                        {% endif %}

                        <section class="upload-section">
                            <h6 class="upload-section-title">Basic Info</h6>

                            <div class="upload-field">
                                <label for="id_title" class="form-label">Title</label>
                                {{ form.title }}
                                <div class="invalid-feedback">Please provide a title.</div>
                                {% for error in form.title.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>

                            <div class="upload-field">
                                <label for="id_description" class="form-label">Description</label>
                                {{ form.description }}
                                <div class="invalid-feedback">Please provide a description.</div>
                                {% for error in form.description.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                        </section>

                        <section class="upload-section upload-source-section">
                            <h6 class="upload-section-title">Media Source</h6>

                            <div class="upload-source-grid">
                                <div class="upload-source-panel" data-source-panel="file">
                                    <label for="id_file" class="form-label">Upload File</label>
                                    <div class="upload-file-picker">
                                        {{ form.file }}
                                        <label for="id_file" class="upload-file-trigger">
                                            <i class="fas fa-folder-open"></i>
                                            <span>Choose File</span>
                                        </label>
                                    </div>
                                    <small class="form-text">Video, audio, or image file.</small>
                                    <p class="upload-source-state mb-0" data-file-status>Select a file to upload.</p>
                                    {% for error in form.file.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                                </div>

                                <div class="upload-or" aria-hidden="true">OR</div>

                                <div class="upload-source-panel" data-source-panel="youtube">
                                    <label for="id_youtube_url" class="form-label">YouTube Link</label>
                                    {{ form.youtube_url }}
                                    <small class="form-text">Use watch/share/embed/shorts links.</small>
                                    {% for error in form.youtube_url.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                                </div>
                            </div>
                        </section>

                        <section class="upload-section">
                            <h6 class="upload-section-title">Presentation</h6>

                            <div class="upload-field">
                                <label for="id_thumbnail" class="form-label">Thumbnail</label>
                                <div class="upload-file-picker">
                                    {{ form.thumbnail }}
                                    <label for="id_thumbnail" class="upload-file-trigger">
                                        <i class="fas fa-image"></i>
                                        <span>Choose Thumbnail</span>
                                    </label>
                                </div>
                                <small class="form-text">Recommended: clear 16:9 image for best card previews.</small>
                                <p class="upload-source-state mb-0" data-thumb-status>No thumbnail selected.</p>
                                {% for error in form.thumbnail.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>

                            <div class="upload-field">
                                <label for="id_tags" class="form-label">Tags</label>
                                {{ form.tags }}
                                <small class="form-text">Separate tags with commas.</small>
                                {% for error in form.tags.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>

                            {% if form.genre %}
                            <div class="upload-field">
                                <label for="id_genre" class="form-label">Genre</label>
                                {{ form.genre }}
                                {% for error in form.genre.errors %}<div class="invalid-feedback d-block">{{ error }}</div>{% endfor %}
                            </div>
                            {% endif %}
                        </section>

                        <div class="upload-submit-row">
                            <button type="submit" class="btn btn-primary btn-lg upload-submit-btn">
                                <i class="fas fa-cloud-upload-alt"></i> Publish Content
                            </button>
                        </div>
                    </form>
                </div>
            </article>
        </div>

        <div class="col-xl-4 col-lg-4 mb-4">
            <aside class="card upload-tips-card">
                <div class="card-body">
                    <h5 class="upload-tips-title">Tips for Better Reach</h5>
                    <ul class="upload-tips-list">
                        <li><i class="fas fa-check-circle"></i> Keep titles short, specific, and searchable.</li>
                        <li><i class="fas fa-check-circle"></i> Use strong tags so fans can discover related work.</li>
                        <li><i class="fas fa-check-circle"></i> Thumbnails with clear contrast perform better in feeds.</li>
                        <li><i class="fas fa-check-circle"></i> Choose either local upload or YouTube link, not both.</li>
                    </ul>

                    <div class="upload-requirements">
                        <h6>Quick Requirements</h6>
                        <p class="mb-1">Max upload size: <strong>50 MB</strong></p>
                        <p class="mb-0">Supported: MP4, MPEG, MP3, JPEG, PNG, GIF</p>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/pages/content-upload.js' %}?v=20260226b"></script>
{% endblock extra_js %}
